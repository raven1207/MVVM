<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="format-detection" content="telephone=no">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta content="telephone=no" name="format-detection">
  <link rel="stylesheet" href="./less/common/common.less">
  <title>实现个简单的MVVM</title>
 <style type="text/css">
 	#J_span{
 		border:1px solid blue;
 		height: 50px;
 	}
 </style>
</head>
<body>
   <input type="text" name="" value="" id='J_vueInput'>
   <p id="J_span"></span>
</body>
<script>
// 	Vue.js双向绑定的实现原理

// 实现数据绑定的做法有大致如下几种：

//     发布者-订阅者模式（backbone.js）

//     脏值检查（angular.js）

//     数据劫持（vue.js）

// 数据劫持: vue.js 采用数据劫持的方式，结合发布者-订阅者模式，通过Object.defineProperty()来劫持各个属性的setter，getter以监听属性的变动，在数据变动时发布消息给订阅者，触发相应的监听回调：

// var obj = { };

// // 为obj定义一个名为 say 的访问器属性
// Object.defineProperty(obj, "say", {
//          get: function () {console.log('get方法被调用了')},

//          set: function (val) {console.log('set方法被调用了，参数是'+val)}
// })

// obj.say // 可以像普通属性一样读取访问器属性,get方法被调用了
// obj.say = 'hello vue';//set方法被调用了，参数是hello vue
var obj={}
Object.defineProperty(obj,'say',{
	set:function(val){
		document.getElementById('J_vueInput').value=val;
		document.getElementById('J_span').innerHTML=val;
	}
})
document.addEventListener('keyup',function(e){
	obj.say = e.target.value;
})


</script>
</html>
